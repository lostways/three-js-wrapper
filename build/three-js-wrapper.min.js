!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("three/examples/jsm/controls/OrbitControls.js"),require("three/examples/jsm/loaders/GLTFLoader.js")):"function"==typeof define&&define.amd?define(["exports","three","three/examples/jsm/controls/OrbitControls.js","three/examples/jsm/loaders/GLTFLoader.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ThreeJSWrapper={},e.THREE,e.OrbitControls_js,e.GLTFLoader_js)}(this,(function(e,t,i,r){"use strict";function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var n=s(t);const o=Object.assign({},n,{OrbitControls:i.OrbitControls,GLTFLoader:r.GLTFLoader});class a{constructor(e){if(!e||"object"!=typeof e)throw new Error("canvas is required to construct wrapper");this.canvas=e,this.dimensions={width:e.width,height:e.height},this.camera=this.buildCamera(),this.scene=new THREE.Scene,this.renderer=this.buildRenderer(),this.controls=new o.OrbitControls(this.camera,this.renderer.domElement),this.loader=new o.GLTFLoader,this.clock=new THREE.Clock,this.isRunning=!1}static get THREE(){return THREE}addEntity(e){this.scene.add(e.object3d)}removeEntity(e){if(!(e&&"object"==typeof e&&e.object3d instanceof THREE.Object3D))throw new Error("Can't remove invalid ThreeJSEntity");if(!this.scene.children.includes(e.object3d))throw new Error("Can't remove entity that is not in scene");let t=e.object3d;t instanceof THREE.Mesh&&(t.geometry&&t.geometry.dispose(),t.material&&(t.material instanceof Array?t.material.forEach((e=>e.dispose())):t.material.dispose())),this.scene.remove(e.object3d)}start(){this.resize(),this.bindEventListeners(),this.render(),this.loop(),this.isRunning=!0}render(){this.renderer.render(this.scene,this.camera)}update(){let e=this.clock.getDelta();this.scene.children.forEach((t=>{t.dispatchEvent({type:"update",delta:e})}))}loop(){requestAnimationFrame(this.loop.bind(this)),this.update(),this.render()}resize(){this.fullscreen();let{width:e,height:t}=this.canvas;this.dimensions.width=e,this.dimensions.height=t,this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}fullscreen(){this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight}bindEventListeners(){window.onresize=this.resize.bind(this)}buildRenderer(){let{width:e,height:t}=this.dimensions,i=new THREE.WebGLRenderer({canvas:this.canvas});return i.setSize(e,t),i}buildCamera(){let{width:e,height:t}=this.dimensions,i=e/t;return new THREE.PerspectiveCamera(75,i,.1,1e3)}}Object.defineProperty(e,"GLTFLoader",{enumerable:!0,get:function(){return r.GLTFLoader}}),e.ThreeJSEntity=class{constructor(e={}){this.params=e,this.THREE=a.THREE,this.object3d=this.create(),this.object3d.addEventListener("update",this.update.bind(this))}create(){throw new Error("Entities must have a create method")}update(e){}},e.default=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=three-js-wrapper.min.js.map
